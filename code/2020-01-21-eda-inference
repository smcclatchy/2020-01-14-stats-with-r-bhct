Problems from Inference chapter, pages 72-73
7. Which of the following sentences about a Type I error is not true?
A) The following is another way to describe a Type I error: you decided to reject the null hypothesis on the basis of data that was actually generated by the null hypothesis.
B) The following is another way to describe a Type I error: due to random fluctuations, even though the data you observed were actually generated by the null hypothesis, the p-value calculated from the observed data was small, so you rejected it.
C) From the original data alone, you can tell whether you have made a Type I error. +++++
D) In scientific practice, a Type I error constitutes reporting a “significant” result when there is actually no result.

9. The p-value is larger than 0.05 so using the typical cut-off, we would not reject. This is a type II error. Which of the following is not a way to decrease this type of error? 
A) Increase our chance of a type I error.
B) Take a larger sample size.
C) Find a population for which the null is not true. +++
D) Use a higher alpha level.

Who will volunteer to explain these answers?
7. Type 1 error
9. p-value
The types of errors are defined on page 63 of the text book under “Types of Error”

Problems from EDA chapter, page 125

1. Given the above histogram, how many people are between the ages of 35 and 45?
There are (2 + 4) = 6 people between the ages of 35 and 45.
6 people

2. The InsectSprays data set is included in R. The dataset reports the counts of insects in agricultural experimental units treated with different insecticides. Make a boxplot and determine which insecticide appears to be most effective.

Spray C appears to be the best, followed by D and E
    Code:
        GROUPED_SPRAYS <- split(
  InsectSprays$count,
  InsectSprays$spray
)
boxplot(
  GROUPED_SPRAYS,
  xlab = 'Spray',
  ylab = 'Count',
  cex = 0
)
stripchart(
  GROUPED_SPRAYS,
  vertical = TRUE,
  method = 'jitter',
  add = TRUE
)




ggplot(InsectSprays, aes(x = spray, y = count) ) + 
  geom_boxplot() +
  geom_point()

InsectSprays %>% qplot(data = ., spray, count, geom = c("boxplot", "point"))

3. Download and load this dataset into R. Use exploratory data analysis tools to determine which two columns are different from the rest. Which is the column that is positively skewed?

# Columns D and I are different from the rest.
# Column D is positively skewed.
url <- "http://courses.edx.org/c4x/HarvardX/PH525.1x/asset/skew.RData"
destfile <- file.path(downloads, basename(url))
if (! file.exists(destfile))
    download.file(url, destfile, quiet = TRUE)
load(destfile) # Loads a matrix named "dat".
str(dat)
dat %>%
    as_tibble(.name_repair = function(x) LETTERS[1:length(x)]) %>%
    gather(column) %>%
    qplot(data = ., column, value, geom = "boxplot")



## Another possibility
load(url('http://courses.edx.org/c4x/HarvardX/PH525.1x/asset/skew.RData'))
boxplot(dat)
summary(dat, digits = 1)

par(mfrow = c(3,3))
for(i in 1:ncol(dat)){
  hist(
    dat[,i],
    main = paste0('Column ', i)
  )
}
par(mfrow = c(1,1))

par(mfrow = c(3,3))
for(i in 1:ncol(dat)){
  qqnorm(
    dat[,i],
    main = paste0('Column ', i)
  )
  qqline(dat[,i])
}
par(mfrow = c(1,1))

pairs(dat)

round(apply(dat, 2, mean), 2)
round(apply(dat, 2, sd), 2)
##


4. Which is the column that is negatively skewed?

# Column I (aka column 9) is negatively skewed.
5. Let’s consider a random sample of finishers from the New York City Marathon in 2002. Thisdataset can be found in the UsingR package. Load the library and then load the nym.2002 dataset.
library(dplyr)
data(nym.2002, package="UsingR")
Use boxplots and histograms to compare the finishing times of males and females. Which of the following best describes the difference?
A) Males and females have the same distribution.
B) Most males are faster than most women.
C) Male and females have similar right skewed distributions with the former, 20minutes shifted to the left.
D) Both distribution are normally distributed with a difference in mean of about 30minutes

## Possible code
library(dplyr)
data(nym.2002, package = 'UsingR')

head(nym.2002)

GENDER_GROUPED_TIMES <- split(
  nym.2002$time,
  nym.2002$gender
)
boxplot(
  GENDER_GROUPED_TIMES,
  xlab = 'Gender',
  ylab = 'Time'
)

par(mfrow = c(2,1))
hist(
  GENDER_GROUPED_TIMES$Female,
  xlim = c(0,600),
  main = 'Female Times',
  breaks = 25
)
hist(
  GENDER_GROUPED_TIMES$Male,
  xlim = c(0,600),
  main = 'Male Times',
  breaks = 25
)
par(mfrow = c(1,1))

lapply(GENDER_GROUPED_TIMES, summary, digits = 2)
lapply(GENDER_GROUPED_TIMES, sd)
lapply(GENDER_GROUPED_TIMES, mad)

GENDER_GROUPED_TIMES <- split(
  log(nym.2002$time),
  nym.2002$gender
)
boxplot(
  GENDER_GROUPED_TIMES,
  xlab = 'Gender',
  ylab = 'ln[Time]'
)

par(mfrow = c(2,1))
hist(
  GENDER_GROUPED_TIMES$Female,
  xlim = c(4,7),
  main = 'Female log-Times',
  breaks = 25
)
hist(
  GENDER_GROUPED_TIMES$Male,
  xlim = c(4,7),
  main = 'Male log-Times',
  breaks = 25
)
par(mfrow = c(1,1))

Problems from EDA chapter, page 125-6
NYC marathon
5. Let’s consider a random sample of finishers from the New York City Marathon in 2002. This dataset can be found in the UsingR package. Load the library and then load the nym.2002 dataset.

library(dplyr)
data(nym.2002, package="UsingR")

Use boxplots and histograms to compare the finishing times of males and females. Which of the following best describes the difference?
A) Males and females have the same distribution.
B) Most males are faster than most women.
C) Male and females have similar right skewed distributions with the former, 20 minutes shifted to the left. +
D) Both distribution are normally distributed with a difference in mean of about 30 minutes.

6. Use dplyr to create two new data frames: males and females, with the data for each gender. For males, what is the Pearson correlation between age and time to finish?

7. For females, what is the Pearson correlation between age and time to finish?

8.If we interpret these correlations without visualizing the data, we would conclude that the older we get, the slower we run marathons, regardless of gender. Look at scatterplots and boxplots of times stratified by age groups (20-25, 25-30, etc..). After examining the data, what is a more reasonable conclusion?
A) Finish times are constant up until about our 40s, then we get slower.
B) On average, finish times go up by about 7 minutes every five years.
C) The optimal age to run a marathon is 20-25.
D) Coding errors never happen: a five year old boy completed the 2012 NY city marathon.



Dfad

Dfa

# Part 5. 
nym.2002 %>%
    ggplot(aes(gender, time)) +
    geom_boxplot() +
    ## Match order of gender to next plot.
    scale_x_discrete(limits = c("Male", "Female")) +
    coord_flip()
nym.2002 %>%
    ggplot(aes(time)) +
    geom_histogram(bins = 40) +
    facet_wrap(~ gender, ncol = 1)


# Parts 6-7.
nym.2002 %>%
    group_by(gender) %>%
    do(with(., cor.test(age, time)) %>% broom::tidy()) %>%
    t()
## Output:
            [,1]                                  
gender      "Female"                              
estimate    "0.2443156"                           
statistic   "4.290567"                            
p.value     "2.431127e-05"                        
parameter   "290"                                 
conf.low    "0.1332690"                           
conf.high   "0.3493038"                           
method      "Pearson's product-moment correlation"
alternative "two.sided"                           
            [,2]                                  
gender      "Male"                                
estimate    "0.2432273"                           
statistic   "6.662800"                            
p.value     "5.410695e-11"                        
parameter   "706"                                 
conf.low    "0.1726386"                           
conf.high   "0.3113305"                           
method      "Pearson's product-moment correlation"
alternative "two.sided"

## Part 8
nym.2002 %>%
    mutate(age_group =
               cut(age,
                include.lowest = TRUE,
                breaks = seq(min(age), max(age), by = 5))) %>%
    ggplot(aes(age_group, time, color = gender,
               group = interaction(age_group, gender))) +
    geom_boxplot() +
    theme(axis.text.x = element_text(angle = 45))

# ^ The last NA value is from the age "81" being ignored by seq() ...
# I'm not sure how to fix that :/.  Namely:
#    seq(5, 81, by = 5)
# ... should also output 85, but instead it returns:
#    [1]  5 10 15 20 25 30 35 40 45 50 55 60 65 70 75 80

# Does anyone know how to go about calculating question 8-B?
## For example, do we take the median of each age_group?



